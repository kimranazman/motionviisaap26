# Plan 72-01: Create Work Group & Move Items

## Frontmatter

```yaml
phase: 72
plan: 01
wave: 1
depends_on: []
files_modified:
  - src/lib/nav-config.ts
  - src/components/layout/sidebar.tsx
  - src/components/layout/mobile-sidebar.tsx
autonomous: true
```

## Objective

Create a new "Work" navigation group containing Projects and Tasks, positioned between SAAP and CRM groups.

## Context

The current navigation structure has:
- **SAAP group**: Dashboard, By Objective, Timeline, Kanban, Calendar, Initiatives, Support Tasks, Events
- **CRM group**: Companies (with children), Pipeline, Potential Projects, Projects, Suppliers, Pricing History
- **Admin group**: Users (role-restricted)
- **Top-level items**: Tasks, Members

The goal is to:
1. Create a new "Work" group between SAAP and CRM
2. Move "Projects" from CRM group to Work group
3. Move "Tasks" from topLevelItems to Work group

## Tasks

<task id="1">
<title>Add Work group to navGroups array</title>
<file>src/lib/nav-config.ts</file>
<action>
Insert a new group object at index 1 (between SAAP and CRM) in the navGroups array:

```typescript
{
  key: 'work',
  label: 'Work',
  items: [
    { name: 'Projects', href: '/projects', icon: Briefcase },
    { name: 'Tasks', href: '/tasks', icon: ListChecks },
  ],
},
```
</action>
</task>

<task id="2">
<title>Remove Projects from CRM group</title>
<file>src/lib/nav-config.ts</file>
<action>
Remove the Projects item from the CRM group items array:
```typescript
{ name: 'Projects', href: '/projects', icon: Briefcase },
```
</action>
</task>

<task id="3">
<title>Remove Tasks from topLevelItems</title>
<file>src/lib/nav-config.ts</file>
<action>
Remove the Tasks item from topLevelItems array. After removal, topLevelItems should only contain:
```typescript
export const topLevelItems: TopLevelNavItem[] = [
  { name: 'Members', href: '/members', icon: Users2 },
]
```
</action>
</task>

<task id="4">
<title>Update findGroupForPath for Work group</title>
<file>src/lib/nav-config.ts</file>
<action>
The findGroupForPath function already iterates over all navGroups, so it will automatically handle the new Work group. No changes needed - just verify it works correctly for /projects and /tasks paths.
</action>
</task>

<task id="5">
<title>Update getDefaultNavOrder for Work group</title>
<file>src/lib/nav-config.ts</file>
<action>
The getDefaultNavOrder function already iterates over all navGroups, so it will automatically include the new Work group in the order map. No changes needed.
</action>
</task>

<task id="6">
<title>Verify sidebar.tsx compatibility</title>
<file>src/components/layout/sidebar.tsx</file>
<action>
The sidebar already:
1. Iterates over navGroups and renders via NavGroupComponent
2. Renders topLevelItems separately after groups
3. Uses visibility filtering that handles any group structure

No code changes needed - the component will automatically render the new Work group because it uses the navGroups array directly.

Verify: Tasks will no longer appear in the standalone top-level items section because it's removed from topLevelItems.
</action>
</task>

<task id="7">
<title>Verify mobile-sidebar.tsx compatibility</title>
<file>src/components/layout/mobile-sidebar.tsx</file>
<action>
Same as desktop sidebar - the component:
1. Iterates over navGroups
2. Renders topLevelItems separately
3. No code changes needed

The mobile sidebar will automatically show the new Work group.
</action>
</task>

<task id="8">
<title>Verify getAllNavHrefs includes Work group items</title>
<file>src/lib/nav-config.ts</file>
<action>
The getAllNavHrefs function iterates over navGroups and topLevelItems. Since:
- Projects moves from CRM (still in a navGroup)
- Tasks moves from topLevelItems to Work (now in a navGroup)

Both hrefs will still be captured. No changes needed.
</action>
</task>

## Verification Criteria

1. **Work group appears between SAAP and CRM** - Check navGroups array order
2. **Projects shows under Work group** - Verify in nav-config.ts and visually
3. **Tasks shows under Work group** - Verify in nav-config.ts and visually
4. **Tasks no longer in top-level items** - Check topLevelItems array
5. **CRM group no longer contains Projects** - Verify CRM items list
6. **findGroupForPath returns 'work' for /projects** - Test function
7. **findGroupForPath returns 'work' for /tasks** - Test function
8. **getAllNavHrefs includes both /projects and /tasks** - Test function
9. **Desktop sidebar shows Work group** - Visual verification
10. **Mobile sidebar shows Work group** - Visual verification

## must_haves

- [ ] Work group exists in navGroups at index 1 (between SAAP and CRM)
- [ ] Work group contains Projects item with href '/projects' and Briefcase icon
- [ ] Work group contains Tasks item with href '/tasks' and ListChecks icon
- [ ] Projects is NOT in CRM group items
- [ ] Tasks is NOT in topLevelItems
- [ ] Members remains in topLevelItems
- [ ] Navigation renders correctly on desktop and mobile
