---
phase: 37-sheet-to-modal
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/projects/project-detail-sheet.tsx
  - src/components/pipeline/deal-detail-sheet.tsx
  - src/components/kanban/initiative-detail-sheet.tsx
  - src/components/potential-projects/potential-detail-sheet.tsx
  - src/components/projects/task-detail-sheet.tsx
  - src/components/ai/ai-review-sheet.tsx
  - src/components/ai/deliverable-review-sheet.tsx
autonomous: true

must_haves:
  truths:
    - "All detail views open as centered modals instead of side sheets"
    - "Modals are properly sized (max-w-[650px] or larger)"
    - "Modals have scrollable content with max-h-[90vh]"
    - "All CRUD operations continue to work"
    - "Mobile responsive (slide from bottom)"
  artifacts:
    - path: "src/components/projects/project-detail-sheet.tsx"
      provides: "Project detail as Dialog"
      contains: "DialogContent"
    - path: "src/components/pipeline/deal-detail-sheet.tsx"
      provides: "Deal detail as Dialog"
      contains: "DialogContent"
    - path: "src/components/kanban/initiative-detail-sheet.tsx"
      provides: "Initiative detail as Dialog"
      contains: "DialogContent"
    - path: "src/components/potential-projects/potential-detail-sheet.tsx"
      provides: "Potential project detail as Dialog"
      contains: "DialogContent"
    - path: "src/components/projects/task-detail-sheet.tsx"
      provides: "Task detail as Dialog"
      contains: "DialogContent"
  key_links:
    - from: "All detail components"
      to: "@/components/ui/dialog"
      via: "import statement"
      pattern: "from.*components/ui/dialog"
---

<objective>
Convert all 5 detail sheet components from sliding Sheet to centered Dialog modal.

Purpose: Centered modals provide better UX for detailed content forms. The resizable sheet handle (1px) is too subtle for users to discover.

Output: All detail views use Dialog instead of Sheet, with proper sizing and scroll behavior.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/37-sheet-to-modal/37-RESEARCH.md

Key context from research:
- Sheet and Dialog use same Radix primitive (@radix-ui/react-dialog)
- Conversion is CSS/class change, not fundamental restructure
- Existing Dialog has mobile responsive behavior built in
- Remove `resizable` prop (not supported by Dialog)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert ProjectDetailSheet to Dialog</name>
  <files>src/components/projects/project-detail-sheet.tsx</files>
  <action>
Convert the largest/most complex sheet to Dialog:

1. Update imports:
```typescript
// Replace:
import { Sheet, SheetContent, SheetHeader, SheetTitle, SheetFooter } from '@/components/ui/sheet'
// With:
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog'
```

2. Replace component usage:
- `<Sheet>` -> `<Dialog>`
- `<SheetContent className="...">` -> `<DialogContent className="max-w-[650px] max-h-[90vh] p-0 flex flex-col">`
- `<SheetHeader>` -> `<DialogHeader className="... shrink-0">`
- `<SheetTitle>` -> `<DialogTitle>`
- `<SheetFooter>` -> `<DialogFooter className="... shrink-0">`

3. Update content area:
- Ensure ScrollArea has `className="flex-1 min-h-0"` for proper scroll
- Remove `resizable` prop from content

4. Handle close button padding:
- Ensure header has `pr-10` or `pr-12` to prevent overlap with Dialog's X button

5. Update nested sheets (AIReviewSheet, DeliverableReviewSheet):
- Also convert to Dialog for consistency
- Use `max-w-3xl` for wider AI review content

DO NOT rename the file - keep as project-detail-sheet.tsx to minimize import changes.
  </action>
  <verify>
1. Open a project detail - should appear as centered modal
2. Scroll through long content - should scroll within modal
3. Test all sections: info, financials, deliverables, tasks, documents
4. Test CRUD: edit field, add cost, add deliverable, add task
5. Test mobile: should slide from bottom
  </verify>
  <done>
Project detail opens as centered modal. All functionality works. Mobile responsive.
  </done>
</task>

<task type="auto">
  <name>Task 2: Convert remaining 4 detail sheets</name>
  <files>
    src/components/pipeline/deal-detail-sheet.tsx
    src/components/kanban/initiative-detail-sheet.tsx
    src/components/potential-projects/potential-detail-sheet.tsx
    src/components/projects/task-detail-sheet.tsx
  </files>
  <action>
Apply the same conversion pattern to all remaining sheets:

For each file, do the same transformation as Task 1:

1. **deal-detail-sheet.tsx** (535 lines):
   - Import Dialog components instead of Sheet
   - Use `max-w-[650px]` for width
   - Keep all deal CRUD functionality

2. **initiative-detail-sheet.tsx** (493 lines):
   - Import Dialog components instead of Sheet
   - Use `max-w-[650px]` for width
   - Keep comments section and all functionality

3. **potential-detail-sheet.tsx** (512 lines):
   - Import Dialog components instead of Sheet
   - Use `max-w-[650px]` for width
   - Keep convert-to-deal functionality

4. **task-detail-sheet.tsx** (353 lines):
   - Import Dialog components instead of Sheet
   - Use `max-w-lg` (512px) - tasks are simpler, need less width
   - Keep all task editing functionality

Common pattern for all:
```typescript
<Dialog open={open} onOpenChange={onOpenChange}>
  <DialogContent className="max-w-[650px] max-h-[90vh] p-0 flex flex-col">
    <DialogHeader className="p-6 pb-4 border-b shrink-0">
      <DialogTitle>...</DialogTitle>
    </DialogHeader>
    <ScrollArea className="flex-1 min-h-0">
      {/* existing content */}
    </ScrollArea>
    <DialogFooter className="p-4 border-t shrink-0">
      {/* existing buttons */}
    </DialogFooter>
  </DialogContent>
</Dialog>
```
  </action>
  <verify>
1. Open deal from pipeline - centered modal
2. Open initiative from kanban - centered modal
3. Open potential project - centered modal
4. Open task from project detail - centered modal (smaller width)
5. Each modal: scroll works, CRUD works, mobile responsive
  </verify>
  <done>
All 4 remaining detail views open as centered modals with proper sizing and scroll behavior.
  </done>
</task>

<task type="auto">
  <name>Task 3: Convert AI review sheets</name>
  <files>
    src/components/ai/ai-review-sheet.tsx
    src/components/ai/deliverable-review-sheet.tsx
  </files>
  <action>
Convert the nested AI review sheets to Dialog for consistency:

1. **ai-review-sheet.tsx**:
   - Import Dialog components instead of Sheet
   - Use `max-w-3xl` (768px) for wider content - AI reviews show more data
   - Keep all extraction display and import functionality

2. **deliverable-review-sheet.tsx**:
   - Import Dialog components instead of Sheet
   - Use `max-w-2xl` (672px) for deliverable list
   - Keep checkbox selection and import functionality

These are opened from within project-detail-sheet, so they'll appear as a second modal on top.
Radix handles stacking correctly.
  </action>
  <verify>
1. Upload a document and trigger AI analysis
2. Click "Review" on analyzed document - AI review opens as modal
3. Click "Review Deliverables" - deliverable review opens as modal
4. Import works correctly from modal
5. Closing nested modal returns to parent modal
  </verify>
  <done>
AI review sheets open as centered modals. Nested modal stacking works correctly.
  </done>
</task>

</tasks>

<verification>
Comprehensive testing:
1. Projects page -> click project -> centered modal
2. Pipeline page -> click deal -> centered modal
3. Kanban page -> click initiative -> centered modal
4. Potential page -> click potential project -> centered modal
5. Project detail -> click task -> centered modal (smaller)
6. Project detail -> document review -> AI modal on top
7. All modals: scroll content, CRUD, close button, backdrop click
8. Mobile: all modals slide from bottom
</verification>

<success_criteria>
- All 5 detail sheets use Dialog instead of Sheet
- All modals centered with proper width (650px default, 512px for tasks, 768px for AI)
- All modals have max-h-[90vh] with scroll
- All CRUD operations continue to work
- Mobile responsive (slide from bottom)
- No console errors
</success_criteria>

<output>
After completion, create `.planning/phases/37-sheet-to-modal/37-02-SUMMARY.md`
</output>
