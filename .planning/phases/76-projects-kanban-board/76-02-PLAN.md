# Plan 76-02: Project Kanban Card Component

```yaml
wave: 1
depends_on: []
files_modified:
  - src/components/projects/project-kanban-card.tsx (NEW)
autonomous: true
```

## Objective

Create the draggable project card component for the Kanban board with enhanced data display.

## Tasks

<task id="1">
Create `src/components/projects/project-kanban-card.tsx` following the pattern from `src/components/tasks/task-kanban-card.tsx`:

**Imports:**
- `useSortable` from `@dnd-kit/sortable`
- `CSS` from `@dnd-kit/utilities`
- Badge, Avatar from UI components
- `format` from `date-fns`
- `formatProjectStatus`, `getProjectStatusColor` from `@/lib/project-utils`
- Icons: GripVertical, Building2, Calendar, CheckCircle2

**Props interface:**
```typescript
interface ProjectKanbanCardProps {
  project: {
    id: string
    title: string
    status: string
    company: { name: string } | null
    isInternal?: boolean
    internalEntity?: string | null
    startDate: string | null
    endDate: string | null
    revenue: number | null
    taskCount: number
    taskDoneCount: number
    totalCost: number
  }
  isDragging?: boolean
  onClick?: () => void
}
```

**Features:**
- Use `useSortable({ id: project.id })` hook
- Apply transform and transition styles from useSortable
- Touch tap detection (same pattern as task-kanban-card)
- Drag handle on left side (visible on mobile, hover on desktop)

**Card content (vertical layout):**
1. Title (truncate 2 lines)
2. Status badge with color from `getProjectStatusColor()`
3. Company name with Building2 icon OR "Internal" badge if isInternal
4. Date range: "startDate - endDate" with Calendar icon (format: "MMM d, yyyy")
5. Task progress: "X/Y tasks" with CheckCircle2 icon
6. Revenue (if > 0): formatted as MYR currency
7. Cost (if > 0): formatted as MYR currency in lighter color
</task>

<task id="2">
Implement touch tap detection for mobile:
- Track touch start position and time in a ref
- On touch end, if duration < 200ms and movement < 10px, treat as tap and call onClick
- Prevent default to avoid double-triggering
</task>

## Verification

```bash
# File exists
ls src/components/projects/project-kanban-card.tsx

# Has correct imports
grep "useSortable" src/components/projects/project-kanban-card.tsx
grep "@dnd-kit/sortable" src/components/projects/project-kanban-card.tsx

# Exports component
grep "export function ProjectKanbanCard" src/components/projects/project-kanban-card.tsx

# Has drag handle
grep "GripVertical" src/components/projects/project-kanban-card.tsx

# Shows task progress
grep "taskCount\|taskDoneCount" src/components/projects/project-kanban-card.tsx
```

## must_haves

- [ ] Uses useSortable hook for drag-and-drop
- [ ] Displays project title (truncated)
- [ ] Shows status badge with color coding
- [ ] Shows company name OR "Internal" badge
- [ ] Shows date range (start to end)
- [ ] Shows task progress indicator (X/Y)
- [ ] Shows revenue when available
- [ ] Shows cost when available
- [ ] Touch support with tap detection
- [ ] Visible drag handle on mobile
