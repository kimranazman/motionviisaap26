# Plan 61-01: Full KR Labels in Calendar Data

## Frontmatter

- **Phase:** 61
- **Plan:** 01
- **Wave:** 1
- **Depends on:** None
- **Files modified:** `src/app/(dashboard)/calendar/page.tsx`
- **Autonomous:** Yes

## Objective

Update the calendar server page to fetch the full key result description and pass a formatted label (e.g., "KR1.1 - Achieve RM1M Revenue") to the CalendarView component, satisfying CAL-04.

## Tasks

<task id="1">
**Modify calendar page query to include KR description**

In `src/app/(dashboard)/calendar/page.tsx`, change the `getInitiatives()` function:

1. Update the `keyResult` select from:
   ```typescript
   keyResult: { select: { krId: true } },
   ```
   to:
   ```typescript
   keyResult: { select: { krId: true, description: true } },
   ```

2. Update the mapping to format the full KR label:
   ```typescript
   keyResult: i.keyResult
     ? `${i.keyResult.krId} - ${i.keyResult.description}`
     : 'Unlinked',
   ```

3. Update the page description text from "Monthly view" to "Initiative timelines and events to attend" (to be accurate for both month/week views).
</task>

## Verification

- [ ] Calendar page server query includes `description` in keyResult select
- [ ] The `keyResult` field passed to CalendarView is formatted as "KR1.1 - Description" not just "KR1.1"
- [ ] Unlinked initiatives still show "Unlinked" as the keyResult label
- [ ] No TypeScript errors in the file
- [ ] Page compiles and builds without errors

## Must-Haves

1. Calendar page fetches full KR description from database
2. KR label format is "{krId} - {description}" (e.g., "KR1.1 - Achieve RM1M Revenue")
3. Unlinked initiatives gracefully show "Unlinked"
