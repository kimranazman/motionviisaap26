# Plan 83-02: Integrate AiAnalyzeButton into Header

## Frontmatter

```yaml
phase: 83
plan: 02
title: Integrate AiAnalyzeButton into Header
wave: 2
depends_on: [83-01]
files_modified:
  - src/components/layout/header.tsx (modify)
autonomous: true
```

## Objective

Add the AiAnalyzeButton component to the header, visible only for admin users.

## Context

- AiAnalyzeButton component created in Plan 83-01
- Header already has user session access via `useSession`
- Insert between DetailViewToggle and NotificationBell
- Admin check: `session?.user?.role === 'ADMIN'`

## Tasks

<task id="1">
Modify the header component to include AiAnalyzeButton for admin users.

**File:** `src/components/layout/header.tsx`

**Changes:**
1. Add import for AiAnalyzeButton
2. Add conditional render for admin users between DetailViewToggle and NotificationBell

**Modification:**

After the existing imports, add:
```typescript
import { AiAnalyzeButton } from './ai-analyze-button'
```

In the JSX, after `<DetailViewToggle />` and before `{/* Notifications */}`, add:
```tsx
{/* AI Analyze - Admin only */}
{session?.user?.role === 'ADMIN' && <AiAnalyzeButton />}
```

**Expected result:**
- Admin users see: DetailViewToggle | AiAnalyzeButton | NotificationBell | UserMenu
- Non-admin users see: DetailViewToggle | NotificationBell | UserMenu
</task>

## Verification

```yaml
checks:
  - description: AiAnalyzeButton imported in header
    command: grep -c "import.*AiAnalyzeButton" src/components/layout/header.tsx
    expected: "1"

  - description: Admin-only conditional render exists
    command: grep -c "session?.user?.role === 'ADMIN'" src/components/layout/header.tsx
    expected: "1"

  - description: No TypeScript errors in header
    command: npx tsc --noEmit src/components/layout/header.tsx 2>&1 | grep -c error || echo 0
    expected: "0"
```

## must_haves

- [ ] AiAnalyzeButton imported in header.tsx
- [ ] AiAnalyzeButton rendered only for admin users
- [ ] Button positioned between DetailViewToggle and NotificationBell
- [ ] No TypeScript errors
