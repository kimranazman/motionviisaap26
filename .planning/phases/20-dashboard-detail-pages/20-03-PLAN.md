---
phase: 20-dashboard-detail-pages
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/initiatives/initiative-detail.tsx
  - src/components/companies/company-inline-field.tsx
  - src/components/ui/tabs.tsx
autonomous: true

must_haves:
  truths:
    - "User on phone sees initiative detail fields stacked in 1 column"
    - "User on phone can tap inline edit fields with adequate touch targets"
    - "User on phone can read comments without horizontal overflow"
    - "User on phone can scroll horizontally through tabs if they overflow"
  artifacts:
    - path: "src/components/initiatives/initiative-detail.tsx"
      provides: "Initiative detail page with responsive field grid"
      contains: "grid-cols-1.*md:grid-cols-2"
    - path: "src/components/companies/company-inline-field.tsx"
      provides: "Inline edit field with touch-friendly targets"
      contains: "min-h-\\[44px\\]"
    - path: "src/components/ui/tabs.tsx"
      provides: "Tabs component with horizontal scroll support"
      contains: "overflow-x-auto"
  key_links:
    - from: "src/components/initiatives/initiative-detail.tsx"
      to: "Comments section"
      via: "flex layout with responsive gaps"
      pattern: "flex.*gap-2 md:gap-3"
---

<objective>
Make initiative detail page, company detail modal, and supporting components fully responsive for mobile editing and viewing.

Purpose: DET-01 through DET-05 require detail pages to have responsive layouts, touch-friendly inline editing, readable comments, and scrollable tabs.

Output: Detail pages render correctly on mobile with stacked fields, adequate touch targets, and proper text handling.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/20-dashboard-detail-pages/20-RESEARCH.md
@src/components/initiatives/initiative-detail.tsx
@src/components/companies/company-inline-field.tsx
@src/components/ui/tabs.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initiative detail page responsive layout</name>
  <files>src/components/initiatives/initiative-detail.tsx</files>
  <action>
    Update InitiativeDetail component for mobile responsiveness:

    1. Update header padding:
       - Change `<div className="max-w-4xl mx-auto px-6 py-4">` to `<div className="max-w-4xl mx-auto px-4 md:px-6 py-4">`
       - Change header flex gap: `gap-4` to `gap-3 md:gap-4`

    2. Update content padding:
       - Change `<div className="max-w-4xl mx-auto px-6 py-6 space-y-6">` to `<div className="max-w-4xl mx-auto px-4 md:px-6 py-6 space-y-6">`

    3. Update Details Card grid (DET-01, DET-03):
       - Change `<div className="grid grid-cols-2 gap-6">` to `<div className="grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-6">`
       - This makes fields stack on mobile, 2-column on tablet+

    4. Update Comments section for mobile (DET-05):
       - Change `<div className="flex gap-3">` (for comment input) to `<div className="flex gap-2 md:gap-3">`
       - Add shrink-0 to Avatar: ensure `<Avatar className="h-8 w-8 shrink-0">` (already has shrink-0)
       - Update submit button container:
         Change `<div className="flex justify-between items-center">` to:
         ```jsx
         <div className="flex justify-between items-center flex-wrap gap-2">
           <span className="text-xs text-gray-400 hidden sm:block">Cmd + Enter to submit</span>
           <Button size="sm" className="w-full sm:w-auto" ...>
         ```
         This hides keyboard shortcut hint on mobile and makes button full-width

    5. Update comment list items:
       - Add `shrink-0` to comment avatars (already there)
       - Update username to truncate: `<span className="text-sm font-medium truncate">`
       - Update comment content: ensure `className="text-sm text-gray-700 whitespace-pre-wrap break-words"`

    6. Update comment metadata flex container:
       - Change `<div className="flex items-center justify-between">` to `<div className="flex items-center justify-between gap-2">`
       - Add `min-w-0` to the left side container: `<div className="flex items-center gap-2 min-w-0">`
       - Add `shrink-0` to timestamp: `<span className="text-xs text-gray-400 shrink-0 flex items-center gap-1">`
  </action>
  <verify>
    Check that:
    - Header padding is responsive (px-4 md:px-6)
    - Details grid is `grid-cols-1 md:grid-cols-2`
    - Comment input has responsive button
    - Comment text has break-words for long content
  </verify>
  <done>Initiative detail page displays correctly on mobile with stacked fields and readable comments</done>
</task>

<task type="auto">
  <name>Task 2: Inline edit field touch targets</name>
  <files>src/components/companies/company-inline-field.tsx</files>
  <action>
    Update CompanyInlineField for touch-friendly targets (DET-04):

    1. Update base className for input to have minimum height:
       - Add `min-h-[44px]` to the baseClassName (44px is the minimum recommended touch target)
       - Current: `'w-full bg-transparent border-0 rounded px-2 py-1 -mx-2 -my-1'`
       - Updated: `'w-full bg-transparent border-0 rounded px-2 py-2 -mx-2 min-h-[44px]'`
       - Remove -my-1 as we want adequate vertical space

    2. For multiline textarea, ensure adequate touch target:
       - Current: `className={cn(baseClassName, 'resize-none min-h-[80px]')}`
       - This is already touch-friendly (80px minimum)

    3. Add visual edit indicator for touch devices:
       - The hover state `hover:bg-muted/50` works on desktop
       - Add focus-visible states for touch: already has focus ring
       - This is sufficient as the field is clearly interactive
  </action>
  <verify>
    Check that:
    - Input fields have min-h-[44px]
    - Padding allows comfortable tapping
    - Focus states are visible on touch
  </verify>
  <done>Inline edit fields have adequate touch targets (44px minimum height)</done>
</task>

<task type="auto">
  <name>Task 3: Tabs component horizontal scroll</name>
  <files>src/components/ui/tabs.tsx</files>
  <action>
    Update TabsList to support horizontal scrolling when tabs overflow (DET-03):

    1. Update TabsList className to allow horizontal scroll:
       - Current: `"inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground"`
       - Updated: `"inline-flex h-9 items-center justify-start rounded-lg bg-muted p-1 text-muted-foreground overflow-x-auto whitespace-nowrap"`
       - Changed `justify-center` to `justify-start` so tabs align left when scrolling
       - Added `overflow-x-auto` for horizontal scroll
       - Added `whitespace-nowrap` to prevent tabs from wrapping

    Note: This is a global change to the Tabs component. All tabs in the app will now support horizontal scrolling if they overflow. This is the desired behavior for mobile.
  </action>
  <verify>
    Check that:
    - TabsList has `overflow-x-auto`
    - TabsList has `whitespace-nowrap`
    - TabsList has `justify-start`
  </verify>
  <done>Tabs component supports horizontal scrolling on overflow</done>
</task>

</tasks>

<verification>
Run the development server and test at mobile viewport:

```bash
npm run dev
```

Test Initiative Detail page (/initiatives/[id]):
1. Fields should stack in 1 column on mobile
2. Fields should be 2 columns on tablet/desktop
3. Comment input should have full-width button on mobile
4. Comments should not overflow horizontally

Test Company Detail modal (click a company from Companies page):
1. Inline edit fields should have adequate tap area (44px height)
2. Tapping a field should show focus state
3. Fields should be responsive (1 column on mobile)

Test Tabs (if any detail page uses tabs):
1. If tabs overflow on mobile, horizontal scroll should work
2. Tabs should not wrap to multiple lines
</verification>

<success_criteria>
- DET-01: Initiative detail page has responsive 1/2 column layout
- DET-02: Company detail modal already has responsive grid (verified)
- DET-03: Tabs scroll horizontally instead of wrapping
- DET-04: Inline edit fields have 44px minimum touch target
- DET-05: Comments section is readable with proper text wrapping
</success_criteria>

<output>
After completion, create `.planning/phases/20-dashboard-detail-pages/20-03-SUMMARY.md`
</output>
