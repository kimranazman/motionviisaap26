---
phase: 44-ux-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/initiatives/initiatives-list.tsx
autonomous: true

must_haves:
  truths:
    - "Clicking any initiative row in the Initiatives list opens the initiative detail sheet"
    - "Clicking the dropdown menu button does NOT also open the detail sheet"
    - "Initiative titles in the table wrap to multiple lines instead of being truncated"
    - "After closing the detail sheet, the user returns to the list with the same scroll position"
  artifacts:
    - path: "src/components/initiatives/initiatives-list.tsx"
      provides: "Clickable initiative rows with detail sheet integration and title wrapping"
      contains: "InitiativeDetailSheet"
  key_links:
    - from: "src/components/initiatives/initiatives-list.tsx"
      to: "src/components/kanban/initiative-detail-sheet.tsx"
      via: "import and render InitiativeDetailSheet"
      pattern: "InitiativeDetailSheet"
    - from: "TableRow onClick"
      to: "setSelectedInitiative + setIsSheetOpen"
      via: "click handler setting state"
      pattern: "handleRowClick"
    - from: "DropdownMenuTrigger Button"
      to: "e.stopPropagation()"
      via: "event propagation prevention"
      pattern: "stopPropagation"
---

<objective>
Make initiative list table rows clickable to open the initiative detail sheet, and allow initiative titles to wrap instead of truncating.

Purpose: Users can quickly view initiative details by clicking any row (ROW-01), and long initiative titles are fully readable (FMT-03). This aligns with the existing Companies pattern where rows open detail modals.
Output: Updated initiatives-list.tsx with clickable rows and wrapping titles.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/44-ux-polish/44-RESEARCH.md

@src/components/initiatives/initiatives-list.tsx
@src/components/kanban/initiative-detail-sheet.tsx
@src/components/companies/company-list.tsx (reference pattern for clickable rows)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add clickable rows with InitiativeDetailSheet integration</name>
  <files>src/components/initiatives/initiatives-list.tsx</files>
  <action>
Wire the existing `InitiativeDetailSheet` component into the initiatives list, following the exact pattern from `company-list.tsx`.

1. Import `InitiativeDetailSheet` from `@/components/kanban/initiative-detail-sheet`
2. Add state variables:
   - `const [selectedInitiative, setSelectedInitiative] = useState<any>(null)` (use the Initiative type from the component if available, otherwise any)
   - `const [isSheetOpen, setIsSheetOpen] = useState(false)`
3. Add click handler:
   ```
   const handleRowClick = (initiative: any) => {
     setSelectedInitiative(initiative)
     setIsSheetOpen(true)
   }
   ```
4. Add `handleInitiativeUpdate` callback that refreshes the initiatives list data when the detail sheet saves changes. Look at how the component currently fetches data (likely via props or fetch) and refresh accordingly.
5. Update `<TableRow>` (currently line ~220) to add click handler and cursor:
   - Change `className="group hover:bg-gray-50"` to `className="group cursor-pointer hover:bg-gray-50"`
   - Add `onClick={() => handleRowClick(initiative)}`
6. Add `e.stopPropagation()` to the `<Button>` that is `DropdownMenuTrigger` (currently line ~266):
   - Add `onClick={(e) => e.stopPropagation()}` to the Button
7. Render `<InitiativeDetailSheet>` at the bottom of the component JSX (before the closing fragment/div), passing:
   - `initiative={selectedInitiative}`
   - `open={isSheetOpen}`
   - `onOpenChange={setIsSheetOpen}`
   - `onUpdate={handleInitiativeUpdate}`
   - `allInitiatives={initiatives}` (the full initiatives array for timeline suggestions)

Check InitiativeDetailSheet's props interface to confirm exact prop names. The interface expects:
- `initiative: Initiative | null` (with fields: id, sequenceNumber, title, keyResult, department, status, personInCharge, startDate, endDate, position)
- `open: boolean`
- `onOpenChange: (open: boolean) => void`
- `onUpdate?: (updated: Initiative) => void`
- `allInitiatives?: Array<{id, personInCharge, startDate, endDate, status}>`

The initiatives in the list should already have enough fields to satisfy the Initiative interface. The detail sheet fetches additional data (comments, KPI fields) on its own via API.
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm no type errors. Open http://localhost:3000/initiatives in the browser and verify:
- Clicking a row opens the detail sheet
- Clicking the dropdown "..." button opens only the dropdown (not the sheet)
- Closing the sheet returns to the list
  </verify>
  <done>Clicking any initiative row opens the InitiativeDetailSheet overlay. Dropdown menu button click does NOT also trigger row click (stopPropagation working). Sheet closes cleanly.</done>
</task>

<task type="auto">
  <name>Task 2: Remove title truncation</name>
  <files>src/components/initiatives/initiatives-list.tsx</files>
  <action>
Remove text truncation from initiative titles so they wrap naturally:

1. On line ~226, remove the `truncate` class from the `<p>` element:
   - BEFORE: `<p className="font-medium text-gray-900 truncate">`
   - AFTER: `<p className="font-medium text-gray-900">`

2. On line ~225, remove the `max-w-md` constraint from the wrapping `<div>`:
   - BEFORE: `<div className="max-w-md">`
   - AFTER: `<div>`

This allows long initiative titles to wrap to multiple lines in the table cell.
  </action>
  <verify>
Open http://localhost:3000/initiatives in the browser and verify that an initiative with a long title wraps to multiple lines instead of showing "..." truncation.
  </verify>
  <done>Initiative titles in the table view wrap to multiple lines. No truncation ellipsis visible on long titles.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with no errors
2. Initiative list page loads without errors
3. Clicking a table row opens the detail sheet
4. Clicking dropdown "..." opens only the dropdown menu
5. Long initiative titles wrap (no truncation)
6. Detail sheet shows correct initiative data
7. Closing the detail sheet returns to the list
</verification>

<success_criteria>
- ROW-01 satisfied: Initiative rows are clickable, opening detail sheet
- FMT-03 satisfied: Initiative titles wrap instead of truncating
- No regressions: Dropdown menu still works, list still filters/sorts correctly
</success_criteria>

<output>
After completion, create `.planning/phases/44-ux-polish/44-01-SUMMARY.md`
</output>
