# Requirements Archive: v1.5 Initiative Intelligence & Export

**Archived:** 2026-01-26
**Status:** SHIPPED

This is the archived requirements specification for v1.5.

---

## v1 Requirements

### Hierarchy & Views (VIEW)

- [x] **VIEW-01**: User can see initiatives grouped by Objective > Key Result > Initiative in an expandable hierarchy view
- [x] **VIEW-02**: By Objective view is the default landing view for the initiatives page
- [x] **VIEW-03**: Each Objective and Key Result section header shows initiative count and status summary (e.g., "5 On Track, 2 At Risk")
- [x] **VIEW-04**: User can expand/collapse individual Objective and Key Result sections, with state preserved across data refreshes
- [x] **VIEW-05**: Initiative titles display with full text wrapping (no truncation) in all views
- [x] **VIEW-06**: User can toggle between view modes: By Objective (default), List, Kanban, Timeline, Calendar
- [x] **VIEW-07**: Key Result grouping normalizes free-text `keyResult` field values (trim, case-insensitive) to prevent duplicate groups

### KPI Tracking (KPI)

- [x] **KPI-01**: Each initiative has optional KPI fields: label (text), target (decimal), actual (decimal), unit (text), with manual override flag
- [x] **KPI-02**: KPI actual value auto-calculates from linked project revenue when manual override is not set
- [x] **KPI-03**: User can manually set KPI actual value, which sets the manual override flag and prevents auto-calculation from overwriting
- [x] **KPI-04**: KPI progress displays visually as a progress bar or percentage with color coding (green >80%, yellow 50-80%, red <50%)
- [x] **KPI-05**: KR-level and Objective-level headers show aggregated KPI totals (sum of child initiative targets and actuals)
- [x] **KPI-06**: Null/zero edge cases handled gracefully: no linked projects shows "No data" (not 0%), zero target shows absolute value (no division), null revenue treated as 0 for sums
- [x] **KPI-07**: Manual vs auto-calculated values are visually distinguished (indicator icon or label)

### Linked Projects (PROJ)

- [x] **PROJ-01**: Each initiative row shows inline list of linked projects with title, status badge, revenue, and costs
- [x] **PROJ-02**: User can click a linked project to navigate to the project detail view
- [x] **PROJ-03**: Initiative row shows a project count badge (e.g., "3 projects") when projects are linked
- [x] **PROJ-04**: Initiatives with no linked projects show appropriate empty state (not broken UI)

### Date Intelligence (DATE)

- [x] **DATE-01**: Overdue initiatives flagged with red badge showing "X days overdue" (endDate < today, status not COMPLETED/CANCELLED)
- [x] **DATE-02**: Ending-soon initiatives flagged with orange badge showing "Ends in X days" (endDate within 14 days, not completed)
- [x] **DATE-03**: Late-start initiatives flagged with yellow badge (startDate < today, status NOT_STARTED)
- [x] **DATE-04**: Invalid date combinations flagged with red error badge (endDate < startDate)
- [x] **DATE-05**: Long-duration initiatives flagged with gray info badge (>180 days span)
- [x] **DATE-06**: Owner overlap detection warns when same personInCharge has >3 concurrent active initiatives (orange badge "Workload: X concurrent")
- [x] **DATE-07**: Date intelligence badges display inline in the By Objective hierarchy view per initiative row
- [x] **DATE-08**: System suggests better timeline adjustments for initiatives with date issues (e.g., overlapping timelines or unrealistic durations)

### Excel Export (EXPORT)

- [x] **EXPORT-01**: User can export all initiatives to Excel (.xlsx) with a single click from the initiatives page
- [x] **EXPORT-02**: Export includes all columns: #, Objective, Key Result, Title, Department, Status, Owner, Start Date, End Date, Duration, KPI Label, KPI Target, KPI Actual, % Achievement, Linked Projects count, Total Revenue, Total Costs, Monthly Objective, Weekly Tasks, Remarks
- [x] **EXPORT-03**: File downloads with date-stamped filename (SAAP_Initiatives_YYYY-MM-DD.xlsx)
- [x] **EXPORT-04**: Export generates server-side via API route for reliability on NAS deployment
- [x] **EXPORT-05**: Export formats data for readability: dates as dates (not ISO strings), status as readable text, currency with 2 decimal places

### Schema Changes (SCHEMA)

- [x] **SCHEMA-01**: Initiative model extended with nullable KPI fields: kpiLabel (VarChar 100), kpiTarget (Decimal 12,2), kpiActual (Decimal 12,2), kpiUnit (VarChar 50), kpiManualOverride (Boolean default false)
- [x] **SCHEMA-02**: Migration is additive only -- no breaking changes to existing data

---

## v2 Requirements (Deferred)

- KR as first-class entity (KeyResult model with targets, owners, descriptions)
- KPI history/trending over time
- Multi-sheet Excel export (one sheet per objective)
- Export with conditional formatting (colored cells matching app status)
- Customizable date intelligence thresholds (admin settings)
- Saved filter presets in hierarchy view
- Objective progress dashboard widget
- Cross-initiative dependency mapping
- Quarter-over-quarter comparison

---

## Traceability

| REQ-ID | Phase | Status |
|--------|-------|--------|
| SCHEMA-01 | Phase 38 | Complete |
| SCHEMA-02 | Phase 38 | Complete |
| VIEW-07 | Phase 38 | Complete |
| VIEW-01 | Phase 39 | Complete |
| VIEW-02 | Phase 39 | Complete |
| VIEW-03 | Phase 39 | Complete |
| VIEW-04 | Phase 39 | Complete |
| VIEW-05 | Phase 39 | Complete |
| VIEW-06 | Phase 39 | Complete |
| KPI-01 | Phase 40 | Complete |
| KPI-02 | Phase 40 | Complete |
| KPI-03 | Phase 40 | Complete |
| KPI-04 | Phase 40 | Complete |
| KPI-05 | Phase 40 | Complete |
| KPI-06 | Phase 40 | Complete |
| KPI-07 | Phase 40 | Complete |
| PROJ-01 | Phase 40 | Complete |
| PROJ-02 | Phase 40 | Complete |
| PROJ-03 | Phase 40 | Complete |
| PROJ-04 | Phase 40 | Complete |
| DATE-01 | Phase 41 | Complete |
| DATE-02 | Phase 41 | Complete |
| DATE-03 | Phase 41 | Complete |
| DATE-04 | Phase 41 | Complete |
| DATE-05 | Phase 41 | Complete |
| DATE-06 | Phase 41 | Complete |
| DATE-07 | Phase 41 | Complete |
| DATE-08 | Phase 41 | Complete |
| EXPORT-01 | Phase 42 | Complete |
| EXPORT-02 | Phase 42 | Complete |
| EXPORT-03 | Phase 42 | Complete |
| EXPORT-04 | Phase 42 | Complete |
| EXPORT-05 | Phase 42 | Complete |

---

## Milestone Summary

**Shipped:** 34 of 34 v1 requirements
**Adjusted:** None -- all requirements implemented as specified
**Dropped:** None

---
*Archived: 2026-01-26 as part of v1.5 milestone completion*
