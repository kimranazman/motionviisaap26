# Milestone v1.4.2: UI Polish & Bug Fixes

**Status:** ✅ SHIPPED 2026-01-26
**Phases:** 36-37
**Total Plans:** 4

## Overview

Fix post-deployment issues and improve detail panel UX. v1.4.1 corrected price comparison with AI categorization and table filtering. v1.4.2 fixed a documents display bug and converted all sliding sheet panels to centered Dialog modals.

## Phases

### v1.4.1 Line Item Categorization

**Milestone Goal:** Correct v1.4 price comparison - AI categorizes line items, users compare via table filtering (not AI search).

**Context:** v1.4 built on-demand semantic search. The actual need was simpler: AI assigns normalized category names to cost items, then users filter a table to compare prices manually.

#### Phase 36: Line Item Categorization & Price Table
**Goal**: AI categorizes cost line items; users compare prices via filterable table
**Depends on**: Phase 35 (v1.4 complete)
**Requirements**: ITEM-01 to ITEM-09
**Plans**: 2 plans in 2 waves
**Success Criteria** (what must be TRUE):
  1. Cost model has normalizedItem field ✓
  2. AI assigns normalizedItem on cost create/update ✓
  3. User can view all supplier line items in a single table ✓
  4. User can filter by normalizedItem to see all suppliers for same item ✓
  5. User can filter by supplier to see their price list ✓
  6. User can sort by price to compare ✓
  7. User can manually correct normalizedItem if AI got it wrong ✓

Plans:
- [x] 36-01-PLAN.md - Schema update and AI categorization (Wave 1)
- [x] 36-02-PLAN.md - Supplier items table with filtering (Wave 2)

### v1.4.2 UI Polish & Bug Fixes

**Milestone Goal:** Fix post-deployment bugs and improve detail panel UX.

#### Phase 37: Convert Detail Sheets to Modals ✓
**Goal**: Fix documents not showing, replace sliding sheets with centered Dialog/Modal for better UX
**Depends on**: Phase 36 (v1.4.1 complete)
**Requirements**: Bug fix + UX improvement
**Plans**: 2 plans in 1 wave
**Success Criteria** (what must be TRUE):
  1. Documents display correctly in project detail ✓
  2. Detail panels use centered Dialog/Modal instead of sliding Sheet ✓
  3. Modals are properly sized (600-700px default width) ✓
  4. Modals have scrollable content with max-height 90vh ✓
  5. All existing CRUD operations work (costs, deliverables, tasks, documents) ✓
  6. Mobile responsive ✓

Plans:
- [x] 37-01-PLAN.md - Debug and fix documents display issue (Wave 1)
- [x] 37-02-PLAN.md - Convert detail sheets to modals (Wave 1)

---

## Milestone Summary

**Key Decisions:**
- 36-01: gpt-4o-mini with temperature=0 for consistent categorization
- 36-01: Fire-and-forget pattern for non-blocking API responses
- 36-02: Page named "Price Comparison" for user clarity
- 36-02: Server component with direct prisma (middleware handles auth)
- 37-01: Reset state inside fetch effect to prevent race conditions
- 37-02: Dialog widths: 650px default, 512px tasks, 768px AI review, 672px deliverable review
- 37-02: Keep file names as *-sheet.tsx to minimize import changes

**Issues Resolved:**
- Documents not displaying in project detail (useEffect dependency mismatch)
- Resizable sheet handle too subtle (1px) — replaced with centered Dialog modals
- v1.4 price comparison via semantic search — replaced with table filtering + AI categorization

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- File names still use *-sheet.tsx naming convention despite being Dialog modals (intentional to minimize import changes)
- useEffect dependency warnings in project-detail-sheet.tsx (missing 'project' dependency — intentionally excluded to avoid infinite re-renders)

---

_For current project status, see .planning/ROADMAP.md_
