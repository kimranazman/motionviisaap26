# Milestone v1.5: Initiative Intelligence & Export

**Status:** SHIPPED 2026-01-26
**Phases:** 38-42
**Total Plans:** 8

## Overview

Transform the initiatives view from a flat list into an objective-driven intelligence layer with KPI tracking, date intelligence, linked project visibility, and Excel export. Five phases move from schema foundation through hierarchy view, KPI and project enrichment, date intelligence, to Excel export -- each building on the previous to deliver a progressively richer initiatives experience.

## Phases

### Phase 38: Schema & Utilities Foundation
**Goal**: All KPI fields exist in the database and pure-function utility modules for grouping, KPI calculation, and date intelligence are ready for consumption by UI components
**Depends on**: Nothing (first phase of v1.5)
**Requirements**: SCHEMA-01, SCHEMA-02, VIEW-07
**Plans**: 1 plan

Plans:
- [x] 38-01-PLAN.md -- Schema migration (5 KPI fields) and 3 utility modules (group, KPI, date)

### Phase 39: By Objective Hierarchy View
**Goal**: Users land on an objective-driven hierarchy that groups all 28 initiatives by Objective and Key Result with expand/collapse and full text display
**Depends on**: Phase 38 (schema + group-utils)
**Requirements**: VIEW-01, VIEW-02, VIEW-03, VIEW-04, VIEW-05, VIEW-06
**Plans**: 2 plans

Plans:
- [x] 39-01-PLAN.md -- Objectives route, hierarchy components (Objective/KR/Initiative), sidebar navigation
- [x] 39-02-PLAN.md -- ViewModeToggle component integrated into all 5 view pages

### Phase 40: KPI Tracking & Linked Projects
**Goal**: Each initiative row shows KPI progress (auto-calculated or manual) and inline linked project details, enabling users to assess initiative health at a glance
**Depends on**: Phase 39 (hierarchy view to render KPI and project data within)
**Requirements**: KPI-01, KPI-02, KPI-03, KPI-04, KPI-05, KPI-06, KPI-07, PROJ-01, PROJ-02, PROJ-03, PROJ-04
**Plans**: 2 plans

Plans:
- [x] 40-01-PLAN.md -- KPI data layer, progress bar component, header aggregation, and detail sheet KPI editing
- [x] 40-02-PLAN.md -- Linked projects section component, count badge on rows, detail sheet integration

### Phase 41: Date Intelligence
**Goal**: Initiative rows display contextual date badges that flag overdue, ending-soon, late-start, invalid-date, long-duration, and owner overlap situations
**Depends on**: Phase 39 (hierarchy view to render badges within)
**Requirements**: DATE-01, DATE-02, DATE-03, DATE-04, DATE-05, DATE-06, DATE-07, DATE-08
**Plans**: 2 plans

Plans:
- [x] 41-01-PLAN.md -- Date badges component, overlap detection utility, hierarchy integration
- [x] 41-02-PLAN.md -- Timeline suggestions component in initiative detail sheet

### Phase 42: Excel Export
**Goal**: Users can export all initiative data to a formatted Excel file with a single click
**Depends on**: Phase 40 + 41 (all data columns must exist before export serializes them)
**Requirements**: EXPORT-01, EXPORT-02, EXPORT-03, EXPORT-04, EXPORT-05
**Plans**: 1 plan

Plans:
- [x] 42-01-PLAN.md -- Server-side XLSX export API route and export button in initiatives list toolbar

---

## Milestone Summary

**Key Decisions:**
- Zero new npm dependencies -- existing shadcn/ui, date-fns, xlsx cover all needs
- Separate /objectives route (not tabs on existing page) -- distinct data requirements
- xlsx export-only use is safe per SheetJS CVE advisory
- kpiUnit uses VarChar(50) per REQUIREMENTS.md SCHEMA-01
- Each utility file defines its own TypeScript interfaces (no shared types directory)
- ViewModeToggle uses route-based navigation (Link + usePathname)
- DateBadges placed between title and KPI bar (contextual to timeline)
- Overlap map computed once via useMemo at ObjectiveHierarchy root level
- Export API route has its own Prisma query (not reusing existing GET /api/initiatives)
- Revenue/costs exported as plain numbers with 2 decimal precision for Excel arithmetic

**Issues Resolved:**
- None -- clean execution across all 5 phases

**Issues Deferred:**
- normalizeKeyResult exported but only consumed internally (low severity)

**Technical Debt Incurred:**
- None

---

_For current project status, see .planning/ROADMAP.md_
